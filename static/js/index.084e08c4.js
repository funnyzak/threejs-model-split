(function(e){function t(t){for(var n,a,c=t[0],s=t[1],l=t[2],u=0,h=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,c=1;c<o.length;c++){var s=o[c];0!==i[s]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},i={index:0},r=[];function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("9582")},"0613":function(e,t,o){"use strict";var n={namespaced:!0,state:{status:"production",device:"desktop"},mutations:{TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{toggleDevice:function(e,t){var o=e.commit;o("TOGGLE_DEVICE",t)}}},i=n,r={device:function(e){return e.app.device},status:function(e){return e.app.status}},a=r,c={},s={},l=o("5502");t["a"]=Object(l["a"])({state:{},mutations:s,actions:c,getters:a,modules:{app:i}})},5541:function(e,t,o){"use strict";o("af11")},"570b":function(e,t,o){"use strict";o("9558")},9558:function(e,t,o){},9582:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function i(e,t){var o=Object(n["A"])("router-view");return Object(n["s"])(),Object(n["d"])(o)}var r=o("6b0d"),a=o.n(r);const c={},s=a()(c,[["render",i]]);var l=s,d=o("6c02"),u=(o("b0c0"),{class:"home"});function h(e,t,o,i,r,a){var c=Object(n["A"])("router-link");return Object(n["s"])(),Object(n["f"])("div",u,[Object(n["i"])(Object(n["C"])(i.page.title)+" ",1),Object(n["g"])("ul",null,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(e.$router.getRoutes(),(function(e){return Object(n["s"])(),Object(n["f"])("li",{key:e.name},[Object(n["j"])(c,{to:{name:e.name}},{default:Object(n["G"])((function(){return[Object(n["i"])(Object(n["C"])(e.name),1)]})),_:2},1032,["to"])])})),128))])])}var f={setup:function(){var e=Object(n["x"])({title:"ThreeJS Toturial"});return{page:e}},data:function(){return{}},computed:{}};const v=a()(f,[["render",h]]);var m=v;function b(e,t){var o=Object(n["A"])("router-view");return Object(n["s"])(),Object(n["d"])(o)}const g={},p=a()(g,[["render",b]]);var w=p,M={id:"container",style:{width:"100vw",height:"100vh"}};function j(e,t,o,i,r,a){return Object(n["s"])(),Object(n["f"])("canvas",M)}var O=o("5a89"),y={data:function(){return{canvas:null,renderer:null,camera:null}},computed:{},mounted:function(){this.rendererCanvas(),window.onresize=this.onWindowResize},unmounted:function(){window.onresize=null},methods:{onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio)},rendererCanvas:function(){var e=this,t=window.document.querySelector("#container"),o=new O["K"]({canvas:t,antialias:!0,alpha:!0,preserveDrawingBuffer:!0});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(window.devicePixelRatio),this.canvas=t,this.renderer=o;var n=new O["E"];this.camera=new O["y"](70,window.innerWidth/window.innerHeight,.01,10),this.camera.position.z=1;var i=new O["c"](.2,.2,.2),r=new O["w"],a=new O["v"](i,r);n.add(a),this.renderer.setAnimationLoop((function(t){a.rotation.x=t/2e3,a.rotation.y=t/1e3,e.renderer.render(n,e.camera)}))}}};const x=a()(y,[["render",j]]);var S=x,z=function(e){return Object(n["w"])("data-v-0b314998"),e=e(),Object(n["t"])(),e},P={class:"button-container"},C=z((function(){return Object(n["g"])("div",{class:"footer"},[Object(n["i"])(" Model by "),Object(n["g"])("a",{href:"https://sketchfab.com/3d-models/motorcycle-custom-bike-jawa-low-poly-13771fe558604aedae09b5157029e790",target:"_blank"},"Kreems")],-1)})),L={id:"container",ref:"container",style:{width:"100vw",height:"100vh","background-color":"#222"}};function E(e,t,o,i,r,a){return Object(n["s"])(),Object(n["f"])("div",null,[Object(n["g"])("div",P,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(){return a.meshToggle&&a.meshToggle.apply(a,arguments)})},Object(n["C"])(e.meshExpand?"复原模型":"分体扩散"),1)]),C,Object(n["g"])("canvas",L,null,512)])}var k,W=o("4721"),R=o("4086"),D=o("e642"),J=o("22b5"),T={name:"motorcycle",res:{obj:"model/motorcycle/motorcycle.obj",mtl:"model/motorcycle/motorcycle.mtl"}},_={data:function(){return{container:null,canvas:null,renderer:null,camera:null,controls:null,activeModel:null,activeModelMaterials:null,actvieModelSize:{boxSize:null,boxCenter:null,boxSizeLength:null}}},computed:{},mounted:function(){window.onresize=this.onWindowResize,this.container=this.$refs.container,this.rendererCanvas(),this.loadModel(T)},unmounted:function(){window.onresize=null},methods:{objMove:function(e,t,o){console.log("obj move",e,t,o),new J.Tween({x:t.x,y:t.y,z:t.z}).to({x:o.x,y:o.y,z:o.z},500).easing(J.Easing.Quadratic.Out).onUpdate((function(t){e.position.set(t.x,t.y,t.z)})).start()},meshToggle:function(){this.meshExpand=!this.meshExpand,this.meshExpand?this.dismantling():this.recovery()},dismantling:function(){var e=this;this.activeModel.traverse((function(t){t.isMesh&&e.objMove(t,t.fromPosition,t.toPosition)})),console.log("dismantling done.")},recovery:function(){var e=this;this.activeModel.traverse((function(t){t.isMesh&&e.objMove(t,t.toPosition,t.fromPosition)})),console.log("recovery done.")},onWindowResize:function(){this.camera.aspect=this.container.offsetWidt/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)},rendererCanvas:function(){var e=window.document.querySelector("#container"),t=new O["K"]({canvas:e,antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(this.container.offsetWidth,this.container.offsetHeight),t.setPixelRatio(window.devicePixelRatio),this.canvas=e,this.renderer=t,k=new O["E"]},setCamera:function(){var e=new O["y"](45,this.container.offsetWidth/this.container.offsetHeight,.1,1e3);e.position.set(0,10,20),this.frameArea(1.2*this.actvieModelSize.boxSizeLength,this.actvieModelSize.boxSizeLength,this.actvieModelSize.boxCenter,e),this.camera=e,this.setLight(),this.setControls(),this.renderer.render(k,this.camera)},setLight:function(){var e=new O["a"](16777215,.4);k.add(e);var t=new O["z"](16777215,.4);this.camera.add(t),k.add(this.camera)},setControls:function(){var e=this,t=new W["a"](this.camera,this.renderer.domElement);t.update(),this.controls=t;var o=function t(){J.update(),window.requestAnimationFrame(t),e.controls.update(),e.renderer.render(k,e.camera)};o()},frameArea:function(e,t,o,n){var i=.6*e,r=O["u"].degToRad(.5*n.fov),a=i/Math.tan(r),c=(new O["J"]).subVectors(n.position,o).multiply(new O["J"](1,0,1)).normalize();n.position.copy(c.multiplyScalar(a).add(o)),n.near=t/1e3,n.far=1e3*t,n.updateProjectionMatrix(),n.lookAt(o)},loadModel:function(e){var t=this,o=this.loadMtlManager(),n=this.loadModelManager(),i=new R["a"](o);i.load(e.res.mtl,(function(o){o.preload(),console.log("model materials:",o),t.activeModelMaterials=o,new D["a"](n).setMaterials(o).load(e.res.obj,t.loadModelSuccess,t.loadModelProcess,t.loadModelError)}))},loadMtlManager:function(){var e=new O["r"];return e.onStart=function(e,t,o){console.log("Loading Mtl started")},e.onLoad=function(){console.log("Loading Mtl complete")},e.onProgress=function(e,t,o){var n=t/o*100;console.log("Mtl loading percent：",n)},e.onError=function(e){console.error("Mtl Load Error.",e)},e},loadModelManager:function(){var e=new O["r"];return e.onStart=function(e,t,o){console.log("Loading Model started")},e.onLoad=function(){console.log("Loading Model complete")},e.onProgress=function(e,t,o){var n=t/o*100;console.log("Model load percent：",n)},e.onError=function(e){console.error("Model load error:",e)},e},loadModelSuccess:function(e){console.log("model node",e);var t=new O["d"](e,16776960);k.add(t),k.add(e);var o=1.2,n=(new O["b"]).setFromObject(e),i=n.getSize(new O["J"]),r=i.length(),a=n.getCenter(new O["J"]);this.actvieModelSize.boxSize=i,this.actvieModelSize.boxCenter=a,this.actvieModelSize.boxSizeLength=r,e.name="mainModel",this.activeModel=e,e.traverse((function(e){if(e instanceof O["v"]){e.castShadow=!0,e.receiveShadow=!0;var t=(new O["b"]).setFromObject(e),n=t.getCenter(new O["J"]);e.fromPosition=e.position.clone();var i=new O["m"](a,n),r=new O["J"];i.delta(r),e.toPosition=e.fromPosition.clone().addScaledVector(r,o)}})),this.setCamera()},loadModelProcess:function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log("".concat(Math.round(t,2),"% downloaded"))}},loadModelError:function(e){console.error("load model error.",e)}}};o("570b");const H=a()(_,[["render",E],["__scopeId","data-v-0b314998"]]);var A=H,F=function(e){return Object(n["w"])("data-v-1b932d88"),e=e(),Object(n["t"])(),e},V={class:"button-container"},q={key:0,style:{display:"flex"}},B={style:{width:"120px","margin-left":"15px"}},G=F((function(){return Object(n["g"])("div",{class:"footer"},[Object(n["i"])(" Model by "),Object(n["g"])("a",{href:"https://sketchfab.com/3d-models/motorcycle-custom-bike-jawa-low-poly-13771fe558604aedae09b5157029e790",target:"_blank"},"Kreems")],-1)})),K={id:"container",ref:"container",style:{width:"100vw",height:"100vh","background-color":"#222"}};function I(e,t,o,i,r,a){return Object(n["s"])(),Object(n["f"])("div",null,[Object(n["g"])("div",V,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(){return a.meshToggle&&a.meshToggle.apply(a,arguments)})},Object(n["C"])(r.openMove?"关闭分体扩散":"开启分体扩散"),1),r.openMove?(Object(n["s"])(),Object(n["f"])("div",q,[Object(n["H"])(Object(n["g"])("input",{type:"range",style:{width:"600px"},min:"0",max:"5",step:"0.05","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.moveMultiplier=e})},null,512),[[n["E"],r.moveMultiplier]]),Object(n["g"])("div",B,"乘积："+Object(n["C"])(r.moveMultiplier),1)])):Object(n["e"])("",!0)]),G,Object(n["g"])("canvas",K,null,512)])}var $,U={name:"motorcycle",res:{obj:"model/motorcycle/motorcycle.obj",mtl:"model/motorcycle/motorcycle.mtl"}},Q={data:function(){return{openMove:!1,moveMultiplier:0,container:void 0,canvas:void 0,renderer:void 0,camera:void 0,controls:void 0,activeModel:void 0,activeModelMaterials:void 0,actvieModelSize:{box:void 0,boxSize:void 0,boxCenter:void 0,boxSizeLength:void 0}}},computed:{},mounted:function(){window.onresize=this.onWindowResize,this.container=this.$refs.container,this.rendererCanvas(),this.loadModel(U)},unmounted:function(){window.onresize=null},methods:{objMove:function(e,t){e.position.set(t.x,t.y,t.z)},meshToggle:function(){this.openMove&&(this.moveMultiplier=0,this.recovery()),this.openMove=!this.openMove},dismantling:function(){var e=this;this.activeModel.traverse((function(t){t.isMesh&&e.objMove(t,t.toPosition)})),console.log("dismantling done.")},recovery:function(){var e=this;this.activeModel.traverse((function(t){t.isMesh&&e.objMove(t,t.originPosition)})),console.log("recovery done.")},onWindowResize:function(){this.camera.aspect=this.container.offsetWidt/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)},rendererCanvas:function(){var e=window.document.querySelector("#container"),t=new O["K"]({canvas:e,antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(this.container.offsetWidth,this.container.offsetHeight),t.setPixelRatio(window.devicePixelRatio),this.canvas=e,this.renderer=t,$=new O["E"]},setCamera:function(){var e=new O["y"](45,this.container.offsetWidth/this.container.offsetHeight,.1,1e3);e.position.set(0,10,20),this.frameArea(1.2*this.actvieModelSize.boxSizeLength,this.actvieModelSize.boxSizeLength,this.actvieModelSize.boxCenter,e),this.camera=e,this.setLight(),this.setControls(),this.renderer.render($,this.camera)},setLight:function(){var e=new O["a"](16777215,.4);$.add(e);var t=new O["z"](16777215,.4);this.camera.add(t),$.add(this.camera)},setControls:function(){var e=this,t=new W["a"](this.camera,this.renderer.domElement);t.update(),this.controls=t;var o=function t(){window.requestAnimationFrame(t),e.controls.update(),e.renderer.render($,e.camera)};o()},frameArea:function(e,t,o,n){var i=.6*e,r=O["u"].degToRad(.5*n.fov),a=i/Math.tan(r),c=(new O["J"]).subVectors(n.position,o).multiply(new O["J"](1,0,1)).normalize();n.position.copy(c.multiplyScalar(a).add(o)),n.near=t/1e3,n.far=1e3*t,n.updateProjectionMatrix(),n.lookAt(o)},loadModel:function(e){var t=this,o=this.loadMtlManager(),n=this.loadModelManager(),i=new R["a"](o);i.load(e.res.mtl,(function(o){o.preload(),console.log("model materials:",o),t.activeModelMaterials=o,new D["a"](n).setMaterials(o).load(e.res.obj,t.loadModelSuccess,t.loadModelProcess,t.loadModelError)}))},loadMtlManager:function(){var e=new O["r"];return e.onStart=function(e,t,o){console.log("Loading Mtl started")},e.onLoad=function(){console.log("Loading Mtl complete")},e.onProgress=function(e,t,o){},e.onError=function(e){console.error("Mtl Load Error.",e)},e},loadModelManager:function(){var e=new O["r"];return e.onStart=function(e,t,o){console.log("Loading Model started")},e.onLoad=function(){console.log("Loading Model complete")},e.onProgress=function(e,t,o){},e.onError=function(e){console.error("Model load error:",e)},e},loadModelSuccess:function(e){console.log("model node",e);var t=new O["d"](e,16776960);$.add(t),$.add(e);var o=(new O["b"]).setFromObject(e),n=o.getSize(new O["J"]),i=n.length(),r=o.getCenter(new O["J"]);this.actvieModelSize.boxSize=n,this.actvieModelSize.boxCenter=r,this.actvieModelSize.boxSizeLength=i,e.name="mainModel",this.activeModel=e,this.setModelMovePosition(e),this.setCamera()},setModelMovePosition:function(e){var t=this;this.meshExpand&&this.recovery();var o=!this.actvieModelSize.box;o&&(this.actvieModelSize.box=(new O["b"]).setFromObject(e),this.actvieModelSize.boxCenter=this.actvieModelSize.box.getCenter(new O["J"])),e.traverse((function(e){e instanceof O["v"]&&(e.castShadow=!0,e.receiveShadow=!0,o&&(e.meshBox=(new O["b"]).setFromObject(e),e.meshCenter=e.meshBox.getCenter(new O["J"]),e.originPosition=e.position.clone(),console.log("set item originPosition",e.originPosition),e.centerLine3=new O["m"](t.actvieModelSize.boxCenter,e.meshCenter),e.centerLine3Delta=new O["J"],e.centerLine3.delta(e.centerLine3Delta),e.centerLine3DeltaClone=e.centerLine3Delta.clone(),e.centerLine3Distance=e.centerLine3.distance(),console.log("centerLine3：Delta=>",e.centerLine3Delta,"、Distance=>",e.centerLine3Distance)),e.toPosition=e.originPosition.clone().addScaledVector(e.centerLine3DeltaClone,t.moveMultiplier))}))},loadModelProcess:function(e){if(e.lengthComputable)e.loaded,e.total},loadModelError:function(e){console.error("load model error.",e)}},watch:{moveMultiplier:function(e){this.setModelMovePosition(this.activeModel),this.dismantling()}}};o("5541");const N=a()(Q,[["render",I],["__scopeId","data-v-1b932d88"]]);var X=N,Y=[{path:"/",name:"Home",component:m},{path:"/tutorial",name:"Tutoria",component:w,redirect:"/tutorial/hello",children:[{path:"hello",name:"正方体",component:S},{path:"dismantling",name:"固定模型拆分效果",component:A},{path:"dismantling2",name:"动态模型拆分效果",component:X}]}],Z=Object(d["a"])({history:Object(d["b"])(),routes:Y}),ee=Z,te=o("0613");Object(n["c"])(l).use(te["a"]).use(ee).mount("#app")},af11:function(e,t,o){}});